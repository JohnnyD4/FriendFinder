<!DOCTYPE html>
<html>
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	
	<title>Travel Buddy Survey</title>
	
	<!-- <script type="text/javascript" src="../data/friends.js"></script> -->
	<link rel="stylesheet" type="text/css" href="style.css">
	<script src="https://code.jquery.com/jquery.js"></script> 
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
</head>
<body>
<div class="userInfo">
	<div class="userInfoName">
		
	</div>
	<div class="userInfoImg">
		
	</div>
</div>
<div class="container surveyCover">
	<div class="row">
		<div class="col-xs-12">
			<h1>Travel Buddy Survey</h1>
			<h3>Rate the scores based off of your preferences and we will do the rest!</h3>
			<hr>

		</div>	
	</div>

	<div class="row">
		<div class="col-xs-12 ">
			<div class="questions">
				
			</div>
			<div class="answers">
				
			</div>
			<div class="friend">
				<h3>You have a match!</h3>
			</div>
			
		</div>
	</div>
</div>
<script type="text/javascript">
$(document).ready(function() {


	$(".friend").hide();

	var userCounter = 0;

	var counter = 0;

	var a = [];

	var qAnda = [
		{	
			'quest': '<h3>I travel often within a year</h3>',
			'ans1': '<input id="radioBtn" type: "radio" name = "1" value="1 never">',
			'ans2': '<input id="radioBtn" type: "radio" name = "2" value="2 not often">',
			'ans3': '<input id="radioBtn" type: "radio" name = "3" value="3 not sure">',
			'ans4': '<input id="radioBtn" type: "radio" name = "4" value="4 often">',
			'ans5': '<input id="radioBtn" type: "radio" name = "5" value="5 very often">',
			'pBar':'<div class="progress"> <div class="progress-bar progress-bar-success progressBar" role="progressbar" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" style="width:10%">10%</div></div>'
		},

		{	
			'quest': '<h3>I want to go to the mountains</h3>',
			'ans1': '<input id="radioBtn" type: "radio" name = "1" value="1 never">',
			'ans2': '<input id="radioBtn" type: "radio" name = "2" value="2 not often">',
			'ans3': '<input id="radioBtn" type: "radio" name = "3" value="3 not sure">',
			'ans4': '<input id="radioBtn" type: "radio" name = "4" value="4 often">',
			'ans5': '<input id="radioBtn" type: "radio" name = "5" value="5 very often">',
			'pBar':'<div class="progress"> <div class="progress-bar progress-bar-success progressBar" role="progressbar" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" style="width:20%">20%</div></div>'
		},

		{	
			'quest': '<h3>I want to go to the beaches</h3>',
			'ans1': '<input id="radioBtn" type: "radio" name = "1" value="1 never">',
			'ans2': '<input id="radioBtn" type: "radio" name = "2" value="2 not often">',
			'ans3': '<input id="radioBtn" type: "radio" name = "3" value="3 not sure">',
			'ans4': '<input id="radioBtn" type: "radio" name = "4" value="4 often">',
			'ans5': '<input id="radioBtn" type: "radio" name = "5" value="5 very often">',
			'pBar':'<div class="progress"> <div class="progress-bar progress-bar-success progressBar" role="progressbar" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" style="width:30%">30%</div></div>'
		},

		{	
			'quest': '<h3>I travel out of the country</h3>',
			'ans1': '<input id="radioBtn" type: "radio" name = "1" value="1 never">',
			'ans2': '<input id="radioBtn" type: "radio" name = "2" value="2 not often">',
			'ans3': '<input id="radioBtn" type: "radio" name = "3" value="3 not sure">',
			'ans4': '<input id="radioBtn" type: "radio" name = "4" value="4 often">',
			'ans5': '<input id="radioBtn" type: "radio" name = "5" value="5 very often">',
			'pBar':'<div class="progress"> <div class="progress-bar progress-bar-success progressBar" role="progressbar" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" style="width:40%">40%</div></div>'
		},

		{	
			'quest': '<h3>I travel within the country</h3>',
			'ans1': '<input id="radioBtn" type: "radio" name = "1" value="1 never">',
			'ans2': '<input id="radioBtn" type: "radio" name = "2" value="2 not often">',
			'ans3': '<input id="radioBtn" type: "radio" name = "3" value="3 not sure">',
			'ans4': '<input id="radioBtn" type: "radio" name = "4" value="4 often">',
			'ans5': '<input id="radioBtn" type: "radio" name = "5" value="5 very often">',
			'pBar':'<div class="progress"> <div class="progress-bar progress-bar-success progressBar" role="progressbar" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" style="width:50%">50%</div></div>'
		},

		{	
			'quest': '<h3>Traveling is a priority</h3>',
			'ans1': '<input id="radioBtn" type: "radio" name = "1" value="1 never">',
			'ans2': '<input id="radioBtn" type: "radio" name = "2" value="2 not often">',
			'ans3': '<input id="radioBtn" type: "radio" name = "3" value="3 not sure">',
			'ans4': '<input id="radioBtn" type: "radio" name = "4" value="4 often">',
			'ans5': '<input id="radioBtn" type: "radio" name = "5" value="5 very often">',
			'pBar':'<div class="progress"> <div class="progress-bar progress-bar-success progressBar" role="progressbar" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" style="width:60%">60%</div></div>'
		},

		{	
			'quest': '<h3>I set up an itinerary for my entire trip</h3>',
			'ans1': '<input id="radioBtn" type: "radio" name = "1" value="1 never">',
			'ans2': '<input id="radioBtn" type: "radio" name = "2" value="2 not often">',
			'ans3': '<input id="radioBtn" type: "radio" name = "3" value="3 not sure">',
			'ans4': '<input id="radioBtn" type: "radio" name = "4" value="4 often">',
			'ans5': '<input id="radioBtn" type: "radio" name = "5" value="5 very often">',
			'pBar':'<div class="progress"> <div class="progress-bar progress-bar-success progressBar" role="progressbar" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" style="width:70%">70%</div></div>'
		},

		{	
			'quest': '<h3>I stay in high end hotels and airBnBs</h3>',
			'ans1': '<input id="radioBtn" type: "radio" name = "1" value="1 never">',
			'ans2': '<input id="radioBtn" type: "radio" name = "2" value="2 not often">',
			'ans3': '<input id="radioBtn" type: "radio" name = "3" value="3 not sure">',
			'ans4': '<input id="radioBtn" type: "radio" name = "4" value="4 often">',
			'ans5': '<input id="radioBtn" type: "radio" name = "5" value="5 very often">',
			'pBar':'<div class="progress"> <div class="progress-bar progress-bar-success progressBar" role="progressbar" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" style="width:80%">80%</div></div>'
		},

		{	
			'quest': '<h3>I stay in hostels</h3>',
			'ans1': '<input id="radioBtn" type: "radio" name = "1" value="1 never">',
			'ans2': '<input id="radioBtn" type: "radio" name = "2" value="2 not often">',
			'ans3': '<input id="radioBtn" type: "radio" name = "3" value="3 not sure">',
			'ans4': '<input id="radioBtn" type: "radio" name = "4" value="4 often">',
			'ans5': '<input id="radioBtn" type: "radio" name = "5" value="5 very often">',
			'pBar':'<div class="progress"> <div class="progress-bar progress-bar-success progressBar" role="progressbar" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" style="width:90%">90%</div></div>'
		},

		{	
			'quest': '<h3>I love traveling!</h3>',
			'ans1': '<input id="radioBtn" type: "radio" name = "1" value="1 never">',
			'ans2': '<input id="radioBtn" type: "radio" name = "2" value="2 not often">',
			'ans3': '<input id="radioBtn" type: "radio" name = "3" value="3 not sure">',
			'ans4': '<input id="radioBtn" type: "radio" name = "4" value="4 often">',
			'ans5': '<input id="radioBtn" type: "radio" name = "5" value="5 very often">',
			'pBar':'<div class="progress"> <div class="progress-bar progress-bar-success progressBar" role="progressbar" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" style="width:100%">100%</div></div>'
		}
	];

	var newUser = [];
	
	

	var ans = 0;

	$.get("/api", function(data) {
		userCounter = data.length - 1;
		
		
		
		var nameDiv = $("<h2>" + data[userCounter].name + "</h2>");

		var imgDiv = $("<img id='imgStyle'>");

		if(data[userCounter].imgId === '') {
			imgDiv.attr('src', 'http://www.translationwebshop.com/wp-content/themes/translationwebshop/images/img_placeholder_avatar.jpg');
		} else {
			imgDiv.attr('src', data[userCounter].imgId);
		}

		$(".userInfoImg").html(imgDiv);


		$(".userInfoName").html(nameDiv);


		var userData = data[userCounter];

		askQuestions();

		function askQuestions() {

			$(".questions").html(qAnda[counter].quest);
			$(".answers").html(qAnda[counter].ans1);
			$(".answers").append(qAnda[counter].ans2);
			$(".answers").append(qAnda[counter].ans3);
			$(".answers").append(qAnda[counter].ans4);
			$(".answers").append(qAnda[counter].ans5);
			$(".answers").append(qAnda[counter].pBar);

			$("input").on("click", function () {

			// console.log(qAnda.length);
			// console.log(counter);

			if (counter == qAnda.length - 2) {

				$(".questions").hide();
				$(".answers").hide();
				$(".friend").show();

				newUser.push(userData);
				newUser.push(a);

				newWhatever = {
					"name": userData.name,
					"imgId": userData.imgId,
					"scores": a
				};

				// console.log(newWhatever);
				// console.log(data[1][1].scores);
				for (var i = 0; i < data.length; i++) {
					
					// for (var j = 0; j < newWhatever.scores.length; j++) {
							var newString = newWhatever.scores.join();
							var dataString = data[i][i].scores.join();

							// console.log("new user" + newString);

							// console.log("data" + dataString);
						if(newString === dataString) {

							console.log(data[i][i].name);
							console.log(data[i][i].imgId);

							$(".friend").append("<h3>" + data[i][i].name + "</h3>");
							var friendImg = $("<img id='imgStyle'>").attr("src", data[i][i].imgId);	
							$(".friend").append(friendImg);					
						}
					// }
				}

				$.post("/api", newWhatever)
				.done(function(data) {
				console.log("work", data);
				})
			} else {

				counter++;

				askQuestions();

				ans = $(this).val();
				a.push(ans);
				
				
				// console.log("userData", userData);
				// console.log("a", a);
				

				// console.log("new user", newUser);

			}
			
			// $("input").on("click", function() {
				
				// console.log(newUser);

				
				// users.push(newUser)
			// })	

		})
		}

		

			
	})
})

</script>
</body>
</html>